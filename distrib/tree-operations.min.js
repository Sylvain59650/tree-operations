'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};/**
 * @license
 * tree-operations 0.9.1
 * Copyright Sylvain Longep√©e
 * Released under MIT license <https://github.com/Sylvain59650/tree-operations/blob/master/LICENSE>
 */;(function(moduleName,root,factory){if(typeof define==='function'&&define.amd){// define([""], factory);
}else if((typeof exports==='undefined'?'undefined':_typeof(exports))==='object'){module.exports=factory();}else{window.TreeOps=factory();}})("TreeModule",undefined,function(){'use strict';function TreeOps(){}TreeOps.toFlatArray=function(tree,childrenPropertyName,reversible){if(reversible!=true)reversible=false;var stack=tree&&tree.length?[{pointer:tree,offset:0,ref:null}]:[];var flat=[];var current=null;var i=1;while(stack.length){current=stack.pop();current.parentId=current.node?current.node._id:null;while(current.offset<current.pointer.length){var node=current.pointer[current.offset];if(reversible){node._id=i;node._parentId=current.ref;}var children=node[childrenPropertyName];delete node[childrenPropertyName];flat.push(node);current.offset++;if(children){stack.push(current);current={pointer:children,offset:0,node:node,ref:node._id};}i++;}}return flat;};TreeOps.fromArray=function(list,predicateChild){var childrenPropertyName=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"childs";return list.reduce(function(tree,node){var parentNode=list.find(function(parent){return predicateChild(node,parent);});if(parentNode===undefined){tree.push(node);}else{if(!parentNode[childrenPropertyName]){parentNode[childrenPropertyName]=[];}parentNode[childrenPropertyName].push(node);}return tree;},[]);};TreeOps.find=function(tree,predicateFind,predicateChild){var childrenPropertyName=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"childs";if(!tree)return undefined;var found=tree.find(predicateFind);if(found){return found;}var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=tree[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var branch=_step.value;var childrens=branch[childrenPropertyName];if(!childrens)continue;found=this.find(childrens,predicateFind,predicateChild,childrenPropertyName);if(found){return found;}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}return undefined;};TreeOps.orderBy=function(tree,childrenComparaison){var childrenPropertyName=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"childs";if(!tree)return undefined;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=tree[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var branch=_step2.value;var childrens=branch[childrenPropertyName];if(!childrens)continue;branch[childrenPropertyName]=childrens.sort(childrenComparaison);branch[childrenPropertyName]=this.orderBy(branch[childrenPropertyName],childrenComparaison,childrenPropertyName);}}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return();}}finally{if(_didIteratorError2){throw _iteratorError2;}}}return tree;};TreeOps.selectNew=function(tree){var childrenPropertyName=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"childs";var arr=[];for(var _len=arguments.length,fieldsNames=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){fieldsNames[_key-2]=arguments[_key];}for(var i=0;i<tree.length;i++){var item={};var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=fieldsNames[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var f=_step3.value;item[f]=tree[i][f];}}catch(err){_didIteratorError3=true;_iteratorError3=err;}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return();}}finally{if(_didIteratorError3){throw _iteratorError3;}}}if(!item[childrenPropertyName]&&tree[i][childrenPropertyName]){item[childrenPropertyName]=tree[i][childrenPropertyName];}if(item[childrenPropertyName]&&item[childrenPropertyName].length>0){item[childrenPropertyName]=this.selectNew.apply(this,[item[childrenPropertyName],childrenPropertyName].concat(fieldsNames));}arr.push(item);}return arr;};return TreeOps;});